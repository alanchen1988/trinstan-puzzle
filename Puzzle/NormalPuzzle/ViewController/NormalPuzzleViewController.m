    ////  NormalPuzzleViewController.m//  Puzzle////  Created by Trinstan on 12/6/12.//  Copyright 2012 __MyCompanyName__. All rights reserved.//#import "NormalPuzzleViewController.h"@interface NormalPuzzleViewController()@property (nonatomic, retain) UIAlertView *userWonAlertView;@end@implementation NormalPuzzleViewController@synthesize thumbnailImageView,timeLabel;@synthesize board;@synthesize startDate,mainTimer;@synthesize number_of_count;@synthesize gambar;@synthesize userWonAlertView;// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.- (id)init{	self = [super init];	if (self)	{		step = 0;		[board setUserInteractionEnabled:YES];		userWonAlertView = [[UIAlertView alloc] initWithTitle:@"You beat the game!"                                                       message:@"Would you like to play again?"                                                     delegate:self                                            cancelButtonTitle:@"No"                                            otherButtonTitles:@"Yes", nil];	}	return self;}- (void)viewDidLoad {    [super viewDidLoad];		CGRect frame = [[UIScreen mainScreen] applicationFrame];    self.view.frame = frame;        // set the image    self.thumbnailImageView.image = self.gambar;        // show the full image first in the view     UIImageView *fullImage = [[UIImageView alloc] initWithImage:gambar];    fullImage.frame = board.bounds;    [board addSubview:fullImage];    [fullImage release];		//timer and date	self.startDate = [NSDate date];        self.mainTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];	    if (number_of_count == 1) {number_of_count = 2;}    [board playWithImage:gambar andSize:number_of_count];}#pragma mark -#pragma mark Method-(void) updateTimer{    NSDate *currentDate = [NSDate date];    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];    [dateFormatter setDateFormat:@"mm:ss:SS"];    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];    NSString *timeString = [dateFormatter stringFromDate:timerDate];    self.timeLabel.text = [NSString stringWithFormat:@"%@", timeString];    [dateFormatter release];    }#pragma mark -#pragma mark Delegate- (void)puzzleBoardDidFinished:(IAPuzzleBoardView *)puzzleBoard {    UIImageView *fullImage = [[UIImageView alloc]initWithImage:gambar];    fullImage.frame = board.bounds;    fullImage.alpha = 0.0;    [board addSubview:fullImage];        [UIView animateWithDuration:.4                      animations:^{                         // set the alpha of full image to 1.0                         // atur alpha gambar penuh tersebut menjadi 1.0                         fullImage.alpha = 1.0;                                         }                      completion:^(BOOL finished){                         // set the view interaction and set the label text                         // atur status interaksi view dan teks dari label                                                  [board setUserInteractionEnabled:NO];                         [mainTimer invalidate];						 [userWonAlertView show];                     }];    }- (void)puzzleBoard:(IAPuzzleBoardView *)board emptyTileDidMovedTo:(CGPoint)tilePoint{    // You can add some cool sound effects here    step += 1;}- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{	if (buttonIndex == 0) 	{		[self.navigationController popViewControllerAnimated:YES];		return;	}	self.startDate = [NSDate date];	self.mainTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];		step = 0;	[board setUserInteractionEnabled:YES];	[board playWithImage:gambar andSize:number_of_count];}#pragma mark -#pragma mark Memory - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{    // Overriden to allow any orientation.    return YES;}- (void)didReceiveMemoryWarning {    // Releases the view if it doesn't have a superview.    [super didReceiveMemoryWarning];        // Release any cached data, images, etc. that aren't in use.}- (void)viewDidUnload {    [super viewDidUnload];    // Release any retained subviews of the main view.    // e.g. self.myOutlet = nil;	self.thumbnailImageView = nil;	self.timeLabel = nil;}- (void)dealloc {	[thumbnailImageView release];	self.thumbnailImageView = nil;	[timeLabel release];	self.timeLabel = nil;	[board release];		[gambar release];	[userWonAlertView release];		[startDate release];	self.startDate = nil;	[mainTimer release];	self.mainTimer = nil;    [super dealloc];}@end